<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <title>Google Maps V3</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
        google.maps.event.addDomListener(window, 'load', function()
        {
            function success(pos){
                var lng = pos.coords.longitude; 
                var lat = pos.coords.latitude;

                var mapOptions = {
                    zoom: 15,
                    center: new google.maps.LatLng(lat, lng),
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    scaleControl: true
                };
                var mapObj = new google.maps.Map(document.getElementById('gmap'), mapOptions);

                // ラインを引く座標の配列を作成
                var points = [
                    new google.maps.LatLng(lat, lng), 
                    new google.maps.LatLng(33.14785, 129.7314), 
                     
                ];
                
                // ラインを作成
                var polyLineOptions = {
                    path: points,
                    strokeWeight: 5,
                    strokeColor: "#0000ff",
                    strokeOpacity: "0.5"
                };
                
                // ラインを設定
                var poly = new google.maps.Polyline(polyLineOptions);
                poly.setMap(mapObj);
            }
            
            function fail(pos){
                alert('位置情報の取得に失敗しました。エラーコード:'+ error.code);
            }
             
            navigator.geolocation.getCurrentPosition(success,fail);    
            
        });
    </script>
</head>
<body>
    <div id="gmap" style="width: 500px; height: 370px; border: 1px solid Gray;">
    </div>
</body>
</html>